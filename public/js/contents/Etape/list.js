function refresh_fenetre(){oTable.fnDraw(!0)}function tableRowClick(){var e=oTable.fnGetData(this);parseInt(e[0]);var e=parseInt(e[0]),t=$("div#etape-form"),n=null;$.getJSON(etapeAjaxGetURL+e,function(e){t.find("input#etape_id").val(e.etape_id),t.find("input#etape_libelle").val(e.libelle),t.find("select#etape_defaut").val(e.defaut),$("div.error").hide(),0==e.canBeDeleted?$("#btn_delete").hide():$("#btn_delete").show()}),t.find("input#etape_id").val(e),t.bPopup({onClose:function(){oTable.fnDraw()}}),n=new ItpOverlay,new Request.HTML({method:"get",onRequest:function(){n.show("etape-form")},onComplete:function(){n.hide("etape-form")}}).send()}function deleteClick(){var e=$("input#etape_libelle").val();askWarning("Êtes-vous sûr de vouloir supprimer le etape "+e+"?",function(){var e=$("div#etape-form");etape_id=e.find("input#etape_id").val(),$.get(etapeAjaxDeleteURL+"/"+etape_id,null,function(){e.bPopup().close()})})}function showEtapeForm(){reInitEtapeFields();var e=$("div#etape-form");e.find("input#etape_id").val(""),e.find("input#etape_libelle").val(""),e.find("select#etape_defaut").val("0"),$("div.error").hide(),e.bPopup({onClose:function(){oTable.fnDraw()}})}function resizeDataTable(){$("div.datatable-container").width($(window).width()-60),oTable.fnAdjustColumnSizing()}function reInitEtapeFields(){$("div#etape-form").find("input#etape_libelle, input#etape_defaut").css("backgroundColor","#ffffff")}function insertEtape(){var e=$("div#etape-form");reInitEtapeFields(),$.post(etapePostInsertURL,{id:e.find("input#etape_id").val(),libelle:e.find("input#etape_libelle").val(),defaut:e.find("select#etape_defaut").val()},function(e){var t=null,t=$.parseJSON(e);if(0==t.status)$("div.message").html(t.message),$("div.message").show(),$("div#etape-form").bPopup().close();else{switch(t.status){case 2:setFieldInError($("input#etape_libelle"))}$("div.error").html(t.message),$("div.error").show()}})}function setFieldInError(e){e.css("backgroundColor","#ff0000"),e.focus()}function chercher(){null!=hdl&&clearTimeout(hdl),t=setTimeout(function(){recherche()},700)}function recherche(){}var oTable=null;$(document).ready(function(){setInterval(refresh_fenetre,3e5),$("div.datatable-container").width($(window).width()-60),oTable=$("#etape_list").dataTable({sAjaxSource:etapeAjaxBrowseURL,aoColumnDefs:[{bVisible:!1,bSearchable:!1,aTargets:[0]},{sClass:"center",aTargets:[2]}],fnRowCallback:function(e){$(e).addClass("dt-row-common")},aaSorting:[[1,"asc"]],sScrollY:"300px",sDom:'<"H"Cfr>tS<"F"i>',bDeferRender:!0,bRetrieve:!0,bDestroy:!0,bProcessing:!0,bServerSide:!0,bAutoWidth:!0,bJQueryUI:!0,bStateSave:!1,sScrollX:"98%",sPaginationType:"full_numbers",oColVis:{aiExclude:[0],buttonText:"Afficher / masquer des colonnes",bRestore:!0,sRestore:"Afficher toutes les colonnes"},oLanguage:{oPaginate:{sFirst:"Début",sLast:"Fin",sNext:"Suivant",sPrevious:"Précédent"},sSearch:"Rechercher",sProcessing:"Chargement en cours...",sLengthMenu:'Lignes affichées: <select><option value="10">10</option><option value="20">20</option><option value="30">30</option><option value="40">40</option><option value="50">50</option><option value="-1">Toutes</option></select>',sZeroRecords:"Aucun résultat pour cette recherche",sInfo:"Lignes _START_ à _END_ (Total: _TOTAL_)",sInfoFiltered:" - Filtrées parmis _MAX_ lignes",sInfoEmpty:"Aucune donnée à afficher"}});var e=null;$(window).resize(function(){clearTimeout(e),e=setTimeout(resizeDataTable,100)}),$("#etape_list tbody tr").live("click",tableRowClick)});var hdl=null,ifound=0;