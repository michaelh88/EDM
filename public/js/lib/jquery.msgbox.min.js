/***************************************************************
 * jQuery MsgBox 0.3.7
 * by composite (ukjinplant@msn.com)
 * http://blog.hazard.kr
 * Licensed under MIT License.
 ***************************************************************/
(function(b){var c=b.browser.msie&&~~b.browser.version<8,a=c?"absolute":"fixed";b.msgbox=function(h,g){g=b.extend({},b.msgbox.options,g);var j={},d="msgbox-",i=d+"ok",B=d+"no",o="password",k=g.css||{},m=!0,y=!1,u=("input" in g),r=!!g.confirm,D=function(f){setTimeout(function(){var p=b(document.activeElement),q=["."+d+"input","."+d+"button"];if(p.length&&(p.is(q[0])||p.is(q[1]))){console.log("good.")}else{z.find(q+"").eq(0).focus()}},0)},z=b("<div></div>").addClass(d+"ui").css(k.ui||{}),v=b("<div>&shy;</div>").addClass(d+"modal").css(k.modal||{}),l=b("<pre></pre>").addClass(d+"msg").css(k.msg||{}).html(h).appendTo(z),w=u?b("<div><input type='"+(g[o]?o:"text")+"'/></div>").addClass(d+"inbox").css(k.indiv||{}).children().addClass(d+"input").css(k.input||{}).bind("keydown",function(f){if((window.event?window.event.keyCode:f.which)==9&&f.shiftKey){f.preventDefault();z.find("."+d+"button").filter(":last").focus()}}).bind("blur",D).end().appendTo(z):null,A=b("<div></div>").addClass(d+"buttons").css(k.buttons||{}).appendTo(z),n=b("<button></button>").addClass(d+"button").css(k.button||{}).bind("keydown",function(E){if(this!=document.activeElement){return}E.stopPropagation();var q=window.event?window.event.keyCode:E.which,p=b(this),t,f=E.shiftKey;switch(q){case 9:case 39:E.preventDefault();if(t=p[q==9&&f?"prev":"next"]("button"),t.length){t.focus()}else{if(q==9){if(t=z.find("."+d+"input"),t.length){t.select()}else{if(t=p[f?"next":"prev"]("button"),t.length){t.focus()}}}}break;case 37:E.preventDefault();if(t=p.prev("button"),t.length){t.focus()}break;case 27:E.preventDefault();z.find("button."+(u||r?B:i)).trigger("click");break}}).bind("blur",D),s=[n.clone(m).addClass(i).text(r?g.yes:g.ok).appendTo(A),u||r?n.clone(m).addClass(B).text(g.no).appendTo(A):null];z.add(v).bind("keydown",function(){});if(u){g.confirm=m;if(typeof(g.input)=="string"){w.children().val(g.input)}}j.before=function(p){p.stopPropagation();var f=window.event?window.event.keyCode:p.which;if(p.target.type=="text"&&!f){z.find("button."+(u||r?B:i)).trigger("click");return y}switch(f){case 13:z.find("button."+i).trigger("click");return y;case 27:z.find("button."+(u||r?B:i)).trigger("click");return y}};var e="keypress",C="."+d+"ui,."+d+"modal",x=b(document.documentElement?document.documentElement:document.body).append(v).append(z).bind(e,j.before);j.after=function(f,p){for(var q=0,t=f.className.split(" ");q<t.length;q++){switch(t[q]){case i:switch(m){case u:g.submit.call(z[0],p);break;case r:g.submit.call(z[0],!!m);break;default:g.submit.call(z[0]);break}break;case B:if(u||!(u&&r)){g.submit.call(z[0])}else{g.submit.call(z[0],y)}break}}x.unbind(e,j.before)};z.delegate("button","click",function(f){z.add(v).remove();j.after(this,u?w.children().val():null)});if(k.ui){z.css({"margin-left":~~(-z.outerWidth()*0.5)+"px","margin-top":~~(-z.outerHeight()*0.32)+"px"})}if(u){z.find("input:text").select()}else{z.find("button:eq(0)").focus()}return z};b.extend(b.msgbox,{strings:{ok:"OK",yes:"OK",no:"Cancel"},css:{ui:{border:"1px solid black",font:"9pt verdana,gulim,sans-serif","background-color":"white",position:a,left:"50%",top:"32%",overflow:"hidden"},modal:{position:a,left:"0",top:"0",right:"0",bottom:"0","background-color":"black",opacity:".4"},msg:{padding:"2em 4em",overflow:"hidden","font-family":"verdana,gulim,sans-serif"},buttons:{padding:"1em","background-color":"#eee","text-align":"right",overflow:"hidden"},button:{width:"72px",margin:"auto .25em"},indiv:{width:"90%",margin:"-2em auto 2em",border:"1px inset #3D7BAD"},input:{width:"99%",display:"block",border:"0"}}});b.msgbox.options={submit:function(){},confirm:false,css:b.msgbox.css,ok:b.msgbox.strings.ok,yes:b.msgbox.strings.yes,no:b.msgbox.strings.no};b.alert=function(d,e){return b.msgbox(d,{submit:e})};b.confirm=function(d,e){return b.msgbox(d,{confirm:true,submit:e})};b.prompt=function(g,f,h,e){var d=b.isFunction(f);return b.msgbox(g,{input:d?true:f,submit:d?f:h,password:d?h:e})}})(jQuery);
