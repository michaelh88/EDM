function playAlertSound(){soundReady&&soundManager.play("alert")}function updateAlertsDisplay(e){var t=$("span#alerts"),l=t.find("span#alerts-text"),n=($("div#alerts-box"),e);t.unbind("hover"),n>0?(l.html("x "+n),t.show(),blinkElt(t),playAlertSound()):t.hide()}function updateKoCountDisplay(e){$("span#kocount-text").html(e+" pli"+(e>1?"s":"")+" en retard de traitement")}function reposAlertsBox(){var e=$("div#alerts-box"),t=$("span#alerts");t.find("span#alerts-text");var l=t.offset();e.css("top",l.top+51+"px"),e.css("left",l.left-e.outerWidth(!0)+t.outerWidth(!0)-50+"px")}function alertsHoverIn(){null!=alertsHoverTimeout&&clearTimeout(alertsHoverTimeout),reposAlertsBox(),$("div#alerts-box").stop(!0,!0).fadeIn()}function alertsHoverOut(){alertsHoverTimeout=setTimeout(function(){$("div#alerts-box").stop(!0,!0).fadeOut()},1e3)}function koCountClick(){-1==window.location.href.slice().indexOf("lot/list")&&-1==window.location.href.slice().indexOf("Lot/list")?window.location=urlKoList+"/"+btoa(list_alert_url+";"):filtre_param_alert_messagenonlu(list_alert_url)}function alertsClick(){-1==window.location.href.slice().indexOf("lot/list")&&-1==window.location.href.slice().indexOf("Lot/list")?window.location=urlKoList+"/"+btoa(list_ko_url+";"):filtre_param_alert_messagenonlu(list_ko_url)}function refreshAlerts(){refreshAlertsAjaxHandle=$.get(urlGetAlerts,null,function(e){null!=refreshAlertsAjaxHandle&&(refreshAlertsAjaxHandle.abort(),refreshAlertsAjaxHandle=null),null!=refreshAlertsTimeoutHandle&&(clearTimeout(refreshAlertsTimeoutHandle),refreshAlertsTimeoutHandle=null),"string"==typeof e?showError(e):(etemp=e,list_alert_url=e.limits,list_ko_url=e.koList,updateAlertsDisplay(e.koCount),updateAlertsDelay(e.nonlu),refreshAlertsTimeoutHandle=setTimeout(refreshAlerts,1e3*alertsRefreshIntvInSeconds))},"json")}function blinkElt(e){var t=0,t=0;if(-1!=(t=blinkingStatusRef.indexOf(e.selector))){if(blinkingStatus[t][2])return;blinkingStatus.splice(t,1),blinkingStatusRef.splice(t,1)}t=blinkingStatus.length,blinkingStatus[t]=[!1,defaultBlinkCount,!0],blinkingStatusRef[t]=e.selector,blinkEltWorker(e)}function blinkEltWorker(e){var t=blinkingStatus[blinkingStatusRef.indexOf(e.selector)];0>=t[1]?(t[2]=!1,t[0]=!0):(--t[1],e.delay(100).fadeTo(100,0).delay(100).fadeTo(100,1,function(){blinkEltWorker(e)}))}function playNotifySound(){soundReady&&soundManager.play("notify")}function updateAlertsDelay(e){setTimeout(function(){var t=$("span#delay"),l=t.find("span#kocount-text"),n=$("div#delay-box"),r=e;n.empty(),t.unbind("hover"),r>0?(l.html("x "+e),t.show(),blinkElt(t),playNotifySound()):t.hide()},1e4)}var list_alert_url="",etemp,list_ko_url="",alertsRefreshIntvInSeconds=30,soundReady=!1;refreshAlertsAjaxHandle=refreshAlertsTimeoutHandle=null,$(document).ready(function(){try{$.fn.dataTableExt.sErrMode="throw"}catch(e){}soundManager.setup({url:urlFlashPath,onready:function(){soundManager.createSound({id:"alert",url:urlAlertSoundPath}),soundReady=!0,$(window).resize(reposAlertsBox),refreshAlerts()},debugMode:!1}),soundManager.setup({url:urlFlashPath,onready:function(){soundManager.createSound({id:"notify",url:urlNotifySoundPath}),soundReady=!0,$(window).resize(reposAlertsBox),refreshAlerts()},debugMode:!1})});var alertsHoverTimeout=null,blinkingStatus=[],blinkingStatusRef=[],defaultBlinkCount=5;